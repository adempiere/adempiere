<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Migrations>
  <Migration EntityType="D" Name="#320 bugfix for warehouse in cost dimension" ReleaseNo="3.8.0#002" SeqNo="137">
    <Step SeqNo="10" StepType="AD">
      <PO AD_Table_ID="101" Action="U" Record_ID="66648" Table="AD_Column">
        <Data AD_Column_ID="120" Column="IsParent" oldValue="false">true</Data>
      </PO>
    </Step>
    <Step DBType="ALL" Parse="Y" SeqNo="20" StepType="SQL">
      <SQLStatement>ALTER TABLE M_COST DROP CONSTRAINT M_COST_PKEY;
DELETE FROM M_COST WHERE M_WAREHOUSE_ID IS NULL;
ALTER TABLE M_COST ADD CONSTRAINT M_COST_PKEY PRIMARY KEY(AD_CLIENT_ID, AD_ORG_ID, M_PRODUCT_ID, M_COSTTYPE_ID, C_ACCTSCHEMA_ID, M_COSTELEMENT_ID, M_WAREHOUSE_ID , M_ATTRIBUTESETINSTANCE_ID);
INSERT INTO M_WAREHOUSE (M_WAREHOUSE_ID, AD_CLIENT_ID, AD_ORG_ID, ISACTIVE, CREATED, CREATEDBY, UPDATED, UPDATEDBY, VALUE, NAME, DESCRIPTION, C_LOCATION_ID,SEPARATOR, M_WAREHOUSESOURCE_ID, REPLENISHMENTCLASS, ISINTRANSIT)
VALUES (0, 0, 0, 'Y', GETDATE() , 100 ,  GETDATE(), 100 , '0', '*' ,'ALL WAREHOUSE' , 109 ,'*', NULL, NULL, 'N');
</SQLStatement>
      <RollbackStatement>ALTER TABLE M_COST DROP CONSTRAINT M_COST_PKEY;
ALTER TABLE M_COST ADD CONSTRAINT M_COST_PKEY PRIMARY KEY(AD_CLIENT_ID, AD_ORG_ID, M_PRODUCT_ID, M_COSTTYPE_ID, C_ACCTSCHEMA_ID, M_COSTELEMENT_ID, M_ATTRIBUTESETINSTANCE_ID);
DELETE FROM M_WAREHOUSE WHERE M_WAREHOUSE_ID</RollbackStatement>
    </Step>
  </Migration>
</Migrations>
